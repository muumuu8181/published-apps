<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tap Puzzle Master</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="puzzle-container">
        <header class="game-header">
            <div class="game-title">
                <h1>🧩 Tap Puzzle Master</h1>
                <span class="version">v1.0</span>
            </div>
            <div class="game-info">
                <div class="info-item">
                    <span class="info-label">レベル</span>
                    <span class="info-value" id="currentLevel">1</span>
                </div>
                <div class="info-item">
                    <span class="info-label">スコア</span>
                    <span class="info-value" id="scoreDisplay">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">タップ数</span>
                    <span class="info-value" id="tapCount">0</span>
                </div>
            </div>
        </header>

        <div class="game-area">
            <div class="puzzle-board" id="puzzleBoard">
                <!-- Puzzle pieces will be generated by JavaScript -->
            </div>
            
            <div class="game-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text">
                    <span id="progressText">0% 完了</span>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <div class="puzzle-modes">
                <h3>🎯 パズルモード</h3>
                <div class="mode-grid">
                    <button class="mode-btn active" data-mode="colors">
                        <div class="mode-icon">🌈</div>
                        <div class="mode-name">カラーマッチ</div>
                    </button>
                    <button class="mode-btn" data-mode="numbers">
                        <div class="mode-icon">🔢</div>
                        <div class="mode-name">数字パズル</div>
                    </button>
                    <button class="mode-btn" data-mode="patterns">
                        <div class="mode-icon">🔷</div>
                        <div class="mode-name">パターン</div>
                    </button>
                    <button class="mode-btn" data-mode="chain">
                        <div class="mode-icon">⛓️</div>
                        <div class="mode-name">チェーン</div>
                    </button>
                </div>
            </div>

            <div class="difficulty-settings">
                <h3>⚙️ 難易度設定</h3>
                <div class="setting-group">
                    <label>グリッドサイズ:</label>
                    <select id="gridSize">
                        <option value="3">3×3 (簡単)</option>
                        <option value="4" selected>4×4 (普通)</option>
                        <option value="5">5×5 (難しい)</option>
                        <option value="6">6×6 (エキスパート)</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label>制限時間:</label>
                    <select id="timeLimit">
                        <option value="0">なし</option>
                        <option value="60">1分</option>
                        <option value="120">2分</option>
                        <option value="300">5分</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label>色数:</label>
                    <input type="range" id="colorCount" min="3" max="8" value="5">
                    <span id="colorCountValue">5色</span>
                </div>
            </div>

            <div class="game-actions">
                <button class="action-btn start" id="startGameBtn">🚀 ゲーム開始</button>
                <button class="action-btn hint" id="hintBtn">💡 ヒント</button>
                <button class="action-btn shuffle" id="shuffleBtn">🔀 シャッフル</button>
                <button class="action-btn reset" id="resetBtn">🔄 リセット</button>
            </div>
        </div>

        <div class="stats-panel">
            <h3>📊 統計情報</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">🏆</div>
                    <div class="stat-info">
                        <div class="stat-value" id="bestScore">0</div>
                        <div class="stat-label">最高スコア</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">⏱️</div>
                    <div class="stat-info">
                        <div class="stat-value" id="bestTime">--:--</div>
                        <div class="stat-label">最速クリア</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🎯</div>
                    <div class="stat-info">
                        <div class="stat-value" id="accuracy">0%</div>
                        <div class="stat-label">正確性</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🔥</div>
                    <div class="stat-info">
                        <div class="stat-value" id="streak">0</div>
                        <div class="stat-label">連続クリア</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="timer-display" id="timerDisplay">
            <div class="timer-icon">⏰</div>
            <div class="timer-value" id="timerValue">--:--</div>
        </div>

        <!-- Game Complete Modal -->
        <div class="modal-overlay" id="completeModal">
            <div class="modal">
                <div class="modal-header">
                    <h2>🎉 レベルクリア！</h2>
                </div>
                <div class="modal-body">
                    <div class="result-stats">
                        <div class="result-item">
                            <span class="result-label">スコア:</span>
                            <span class="result-value" id="resultScore">0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">時間:</span>
                            <span class="result-value" id="resultTime">00:00</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">タップ数:</span>
                            <span class="result-value" id="resultTaps">0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">効率性:</span>
                            <span class="result-value" id="resultEfficiency">0%</span>
                        </div>
                    </div>
                    
                    <div class="bonus-section">
                        <h3>🎁 ボーナス</h3>
                        <div class="bonus-list" id="bonusList">
                            <!-- Bonuses will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="modal-btn next" id="nextLevelBtn">➡️ 次のレベル</button>
                    <button class="modal-btn menu" id="backToMenuBtn">🏠 メニュー</button>
                </div>
            </div>
        </div>

        <!-- Achievement Toast -->
        <div class="achievement-toast" id="achievementToast">
            <div class="achievement-icon">🏆</div>
            <div class="achievement-text">
                <div class="achievement-title">達成！</div>
                <div class="achievement-desc" id="achievementDesc">新しい記録を更新しました</div>
            </div>
        </div>

        <!-- Particle Effect Canvas -->
        <canvas id="particleCanvas" width="800" height="600"></canvas>
    </div>

    <script src="script.js"></script>
</body>
</html>
# ペイントシステム要件定義書

## アプリID
- **ID**: app-0000003-xbnytu
- **タイプ**: ペイントシステム
- **作成日**: 2025-07-28

## 要件概要
高機能なデジタルペイントアプリケーション。細かい描写が可能で、ブラシのカスタマイズ、豊富なカラーパレット、ファイル保存・読み込み機能を備えた本格的な描画ツールを提供する。

## 機能要件

### 1. 基本描画機能
- **フリーハンド描画**: マウス/タッチでの自由描画
- **直線描画**: Shiftキー押下で直線描画
- **図形描画**: 長方形、円形、三角形の描画
- **消しゴム**: 描画内容の部分削除
- **塗りつぶし**: バケツツールでの領域塗りつぶし

### 2. ブラシ機能
- **ブラシサイズ**: 1px～100pxの調整可能
- **ブラシ硬度**: ソフト・ハードブラシの切り替え
- **ブラシ形状**: 
  - 円形（標準）
  - 四角形
  - スター型
  - ハート型
  - カスタム形状（SVGパス対応）
- **テクスチャブラシ**: 
  - 油彩風
  - 水彩風
  - チョーク風
  - ペン風

### 3. カラー機能
- **カラーピッカー**: HSBカラーホイール
- **パレット**: 
  - 基本色パレット（24色）
  - カスタムパレット（最大50色保存可能）
  - 最近使用した色（10色）
- **グラデーション**: 線形・円形グラデーション
- **透明度**: 0-100%のアルファ値調整

### 4. レイヤー機能
- **マルチレイヤー**: 最大10レイヤー対応
- **レイヤー操作**: 
  - 追加・削除・複製
  - 表示/非表示切り替え
  - 不透明度調整
  - ブレンドモード（通常、乗算、スクリーン等）
- **レイヤー順序**: ドラッグで順序変更

### 5. ファイル操作
- **保存機能**: 
  - PNG形式での保存
  - JPEG形式での保存
  - プロジェクトファイル（JSON）での保存
- **ダウンロード機能**: ローカルへのファイル保存
- **アップロード機能**: 
  - 画像ファイルの読み込み
  - プロジェクトファイルの読み込み
  - ドラッグ&ドロップ対応

### 6. 編集機能
- **取り消し/やり直し**: 最大50回のUndo/Redo
- **全体クリア**: キャンバス全体の消去
- **選択ツール**: 矩形選択でのコピー・貼り付け
- **変形**: 選択領域の拡大・縮小・回転

## 非機能要件

### パフォーマンス
- **描画レスポンス**: リアルタイム描画（遅延<16ms）
- **大サイズ対応**: 2048x2048pxまでの高解像度対応
- **メモリ効率**: ブラウザメモリ使用量<500MB

### UI/UX
- **直感的操作**: ツールアイコンで分かりやすい操作
- **ショートカット**: よく使う機能のキーボードショートカット
- **ツールチップ**: 各機能の説明表示
- **レスポンシブ**: タブレット・デスクトップ両対応

### 技術仕様
- **Canvas API**: HTML5 Canvasでの高速描画
- **WebGL**: グラデーション・フィルター効果で使用
- **ファイルAPI**: File API、Blob APIでのファイル操作
- **タッチ対応**: Touch Events、Pointer Eventsサポート

## 画面構成

### メイン画面
1. **ツールバー**: 描画ツール一覧
2. **カラーパレット**: 色選択エリア
3. **キャンバス**: メイン描画エリア
4. **プロパティパネル**: ブラシ設定・レイヤー管理
5. **メニューバー**: ファイル操作・設定

### ツール配置
- **左サイド**: 描画ツール（ペン、ブラシ、消しゴム等）
- **右サイド**: カラーパレット、レイヤーパネル
- **下部**: ブラシサイズ・透明度スライダー
- **上部**: メニュー、Undo/Redo、保存ボタン

## 特殊機能

### カスタムブラシ
- **ブラシエディター**: SVGパスでの形状定義
- **プリセット**: 10種類のブラシプリセット
- **テクスチャ**: 画像ファイルをブラシテクスチャとして使用

### フィルター効果
- **ぼかし**: ガウシアンブラー
- **シャープ**: エッジ強調
- **色調補正**: 明度・コントラスト・彩度調整
- **エフェクト**: ドロップシャドウ、グロー効果

### 協調機能
- **作品共有**: URLでの作品共有
- **エクスポート**: 高解像度での書き出し
- **印刷対応**: ブラウザ印刷機能対応

## データ構造

### プロジェクトファイル
```javascript
{
  version: "1.0",
  canvas: {
    width: number,
    height: number,
    backgroundColor: string
  },
  layers: [
    {
      id: string,
      name: string,
      visible: boolean,
      opacity: number,
      blendMode: string,
      imageData: string // base64
    }
  ],
  brushes: [
    {
      id: string,
      name: string,
      shape: string, // SVG path
      texture: string // image data
    }
  ]
}
```

## 成功基準
- 滑らかな描画（60fps維持）
- 全機能が正常動作
- 大画像でも快適な操作
- ファイル保存・読み込みが正確
- レスポンシブデザインが機能
- ブラシカスタマイズが直感的

## 制限事項
- オンライン共同編集は非対応
- ベクター描画は非対応（ラスター専用）
- 動画エクスポートは非対応
- 3D描画機能は非対応
# 要件・仕様書: Mega Ultra Stylish Tetris 3D

## 元要求
[0000013] めちゃくちゃ格好良いテトリス
- エフェクトに全振り
- 音も鳴らすこと
- とにかく見た目が格好良い
- ゲーム性、操作性も完璧

## 解釈した仕様

### 基本ゲーム仕様
- **ゲームタイプ**: 標準テトリス + 拡張機能
- **グリッドサイズ**: 10×20（標準）
- **テトロミノ**: 7種類（I, O, T, S, Z, J, L）
- **操作方法**: 
  - 左右移動（←→）
  - 回転（↑/Z右回転、X左回転）
  - ソフトドロップ（↓）
  - ハードドロップ（Space）
  - ホールド（C）- 新機能

### 拡張機能仕様
1. **ホールド機能**: 現在のピースを保存し、後で使用可能（1落下につき1回制限）
2. **ターボモード**: 落下速度70%加速、スコア1.5倍ボーナス
3. **パワーシステム**: 100ポイント制、満タンで下2行自動消去
4. **アチーブメント**: Level10、10コンボ、10万点等の実績システム

### 視覚効果仕様（「エフェクトに全振り」の実現）
1. **3D効果**: CSS 3D Transform による立体的UI配置
2. **パーティクルシステム**: 動的光粒子生成（最大50個制限）
3. **マトリックス雨**: サイバーパンク風背景テキスト落下
4. **ホログラムグリッド**: 格子状スキャンライン効果
5. **エネルギーウェーブ**: 放射状波動エフェクト
6. **ネオンカラー**: 8色ネオンパレット統一使用
7. **グロー効果**: 全要素発光表現
8. **3D描画**: Canvas 2D + CSS Transform による擬似3D

### 音響仕様（「音も鳴らすこと」の実現）
- **Web Audio API使用**: 動的音響生成
- **8種類効果音**: 
  - 移動音（400Hz, square波）
  - 回転音（800Hz, triangle波）
  - ドロップ音（200Hz, sawtooth波）
  - ライン消去音（1200Hz, sine波）
  - ホールド音（600Hz, triangle波）
  - パワー発動音（1500Hz, sine波）
  - ゲームオーバー音（100Hz, sawtooth波）
  - 通常効果音（600Hz, sine波）

### UI/UX仕様（「見た目が格好良い」の実現）
1. **デザインテーマ**: ネオンサイバーパンク + 3D未来的
2. **カラーパレット**: 8種ネオンカラー（シアン、マゼンタ、イエロー等）
3. **フォント**: Orbitron + Exo 2（SF風フォント）
4. **3D配置**: perspective 1000px設定、各要素に奥行き
5. **アニメーション**: 60FPS滑らか動作、ハードウェア加速活用
6. **レスポンシブ**: モバイル・デスクトップ完全対応

### ゲーム性仕様（「操作性も完璧」の実現）
1. **操作レスポンス**: 50ms以下の入力遅延
2. **ウォールキック**: 回転時の壁蹴り機能搭載
3. **ゴーストピース**: 落下予想位置の破線表示
4. **コンボシステム**: 連続ライン消去でスコア倍増
5. **レベル進行**: 10ライン毎にレベルアップ、速度上昇
6. **スコアシステム**: ライン数×レベル×コンボの複合計算

## 技術的制約・判断

### フレームワーク選択
- **制約理由**: 外部ライブラリ依存なし、ブラウザ標準技術のみ
- **選択技術**: HTML5 Canvas, CSS3, JavaScript ES6+
- **判断根拠**: 軽量性、互換性、パフォーマンス重視

### 3D表現手法
- **制約**: Canvas 2Dでの3D描画限界
- **判断**: CSS 3D Transform + Canvas 2D の組み合わせ
- **理由**: WebGL習得コスト vs 効果のバランス考慮

### パフォーマンス制約
- **目標**: 60FPS維持、メモリ50MB以下
- **対策**: パーティクル数制限、GPU加速活用、アニメーション最適化
- **判断**: 視覚効果品質 vs パフォーマンスのバランス調整

### モバイル対応制約  
- **制約**: 小画面での3D効果可読性
- **対策**: レスポンシブ設計、メディアクエリによる段階的調整
- **判断**: アクセシビリティ重視、prefers-reduced-motion対応

### 音響制約
- **制約**: Web Audio API のブラウザ対応差
- **対策**: try-catch による安全実装、段階的機能提供
- **判断**: 全ブラウザ対応優先、音響は補助的位置付け

## 変更履歴
- 2025-07-26: 初回作成（v0.8ワークフロー使用）
- 前回app-004-383f9jから大幅機能拡張
  - ホールド機能追加
  - ターボモード追加  
  - パワーシステム追加
  - 3D効果強化
  - 音響効果拡張（4種→8種）
  - アチーブメント機能追加